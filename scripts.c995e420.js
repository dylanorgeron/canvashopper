parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"N3Pg":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.canvasElement=document.getElementById("main-canvas"),this.canvasCTX=this.canvasElement.getContext("2d"),this.height=this.canvasElement.height,this.width=this.canvasElement.width};exports.default=e;
},{}],"ODNz":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../index"),a=function(){function n(){e(this,n),this.playerXPosition=0,this.playerYPosition=0,this.cameraX=0,this.cameraY=0,this.weapon="",r.emitter.on("renderObjects",this.update.bind(this))}return t(n,[{key:"update",value:function(){var e=document.getElementById("debugger");if(e){var n="\n            Player X Position: ".concat(this.playerXPosition,"\n            <br>\n            Player Y Position: ").concat(this.playerYPosition,"\n            <br>\n            Camera X: ").concat(this.cameraX,"\n            <br>\n            Camera Y: ").concat(this.cameraY,"\n            <br>\n            ");e.innerHTML=n}}}]),n}();exports.default=a;
},{"../index":"KqmS"}],"LqgX":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"diul":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(){t(this,e),this.LeftArrow=37,this.UpArrow=38,this.RightArrow=39,this.DownArrow=40,this.Space=32,this.AKey=65,this.DKey=68,this.WKey=87,this.SKey=83,this.LeftArrowIsActive=!1,this.UpArrowIsActive=!1,this.RightArrowIsActive=!1,this.DownArrowIsActive=!1,this.SpaceIsActive=!1}return i(e,[{key:"setKey",value:function(t,e){switch(t){case this.LeftArrow:case this.AKey:this.LeftArrowIsActive=e,e&&(this.RightArrowIsActive=!1);break;case this.WKey:case this.UpArrow:this.UpArrowIsActive=e;break;case this.RightArrow:case this.DKey:this.RightArrowIsActive=e,e&&(this.LeftArrowIsActive=!1);break;case this.SKey:case this.DownArrow:this.DownArrowIsActive=e;break;case this.Space:this.SpaceIsActive=e}}}]),e}();exports.default=r;
},{}],"kdF2":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large"}(e=exports.RoomSize||(exports.RoomSize={})),exports.default=e;
},{}],"k0V4":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.up="up",e.down="down",e.left="left",e.right="right"}(e||(e={})),exports.default=e;
},{}],"oNOt":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(n,s){t(this,e),this.x=n,this.y=s};exports.default=e;
},{}],"bTC0":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=i();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var s=l(require("./coordinate")),a=function(t){r(u,s.default);var n=o(u);function u(t,r,o){var c;return e(this,u),(c=n.call(this,t,r)).direction=o,c}return u}();exports.default=a;
},{"./coordinate":"oNOt"}],"HhU3":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}var s=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../index"),n=s(require("./coordinate")),r=function(){function t(e,s,n){i(this,t),this.col=e,this.row=s,this.isSolid=n,this.w=a.settings.tileSize,this.h=a.settings.tileSize,this.fillColor="",this.img="",a.emitter.on("updatePhysics",this.update.bind(this)),a.emitter.on("renderObjects",this.draw.bind(this)),this.x=this.col*this.w,this.y=this.row*this.h}return e(t,[{key:"update",value:function(){}},{key:"draw",value:function(){this.h=a.settings.tileSize,this.w=a.settings.tileSize;var i=new n.default(this.x-a.camera.originX-1,this.y-a.camera.originY-1);if(!(i.x<0||i.y<0))if(a.settings.drawTextures){var t=document.getElementById("floor"),e=new n.default(this.x-a.camera.originX,this.y-a.camera.originY);a.canvas.canvasCTX.drawImage(t,e.x,e.y,this.w,this.h)}else a.canvas.canvasCTX.fillStyle="#DDD",a.canvas.canvasCTX.fillRect(i.x,i.y,this.w+2,this.h+2),a.canvas.canvasCTX.fillStyle=this.fillColor?this.fillColor:this.isSolid?"#AAA":"#FFF",a.canvas.canvasCTX.fillRect(this.x-a.camera.originX,this.y-a.camera.originY,this.w,this.h)}}]),t}();exports.default=r;
},{"../index":"KqmS","./coordinate":"oNOt"}],"WRMb":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=s(require("./room-size")),a=s(require("./direction")),h=s(require("./portal")),u=s(require("./tile")),n=function(){function e(i,s,u){switch(t(this,e),this.size=i,this.origin=s,this.enteredFrom=u,this.portals=[],this.tiles=[],this.w=0,this.h=0,i){case r.default.small:this.w=3,this.h=3;break;case r.default.medium:this.w=5,this.h=5;break;case r.default.large:this.w=7,this.h=7}this.portals.push(new h.default(s.x+(this.w-1)/2,s.y,a.default.up)),this.portals.push(new h.default(s.x+(this.w-1)/2,s.y+this.h-1,a.default.down)),this.portals.push(new h.default(s.x,s.y+(this.h-1)/2,a.default.left)),this.portals.push(new h.default(s.x+this.w-1,s.y+(this.h-1)/2,a.default.right))}return i(e,[{key:"generateTiles",value:function(){for(var t=this.origin.x;t<this.w+this.origin.x;t++)for(var e=this.origin.y;e<this.h+this.origin.y;e++)this.tiles.push(new u.default(t,e,!1))}},{key:"drawRoom",value:function(){}}]),e}();exports.default=n;
},{"./room-size":"kdF2","./direction":"k0V4","./portal":"bTC0","./tile":"HhU3"}],"MyIl":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("./room-size")),s=function t(r,s,a){e(this,t),this.size=r,this.w=s,this.h=a};exports.roomPrefabs=[new s(r.default.large,7,7),new s(r.default.medium,5,5),new s(r.default.small,3,3)],exports.default=s;
},{"./room-size":"kdF2"}],"Q5Gq":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../index"),i=o(require("./room")),n=o(require("./direction")),u=require("./room-prefab-config"),s=o(require("./coordinate")),f=o(require("./room-size")),l=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;e(this,t),this.offsetX=0,this.offsetY=0,this.rooms=[],a.emitter.on("renderObjects",this.update.bind(this)),this.generateMap(r)}return r(t,[{key:"update",value:function(){}},{key:"generateMap",value:function(e){var t=!0,r=0;this.rooms=[];var o=new i.default(f.default.large,new s.default(0,0),n.default.left);for(o.generateTiles(),this.rooms.push(o);t;){++r>=e&&(t=!1);var a=this.getPossibleRooms(this.rooms[this.rooms.length-1]),u=a[Math.floor(Math.random()*a.length)];u.generateTiles(),console.log(u),this.rooms.push(u)}console.log(this.rooms)}},{key:"getPossibleRooms",value:function(e){var t=this,r=[];return e.portals.forEach(function(e){u.roomPrefabs.forEach(function(o){var a=new s.default(0,0);switch(e.direction){case n.default.up:a.x=e.x-(o.w-1)/2,a.y=e.y-2-o.h;break;case n.default.down:a.x=e.x-(o.w-1)/2,a.y=e.y+3;break;case n.default.left:a.x=e.x-o.w-2,a.y=e.y-(o.h-1)/2;break;case n.default.right:a.x=e.x+3,a.y=e.y-(o.h-1)/2}var u=new i.default(o.size,new s.default(a.x,a.y),t.getOppositeDirection(e.direction));a.x>=0&&a.y>=0&&(e.direction!=n.default.down&&e.direction!=n.default.right||r.push(u))})}),r}},{key:"getOppositeDirection",value:function(e){switch(e){case n.default.up:return n.default.down;case n.default.down:return n.default.up;case n.default.left:return n.default.right;case n.default.right:return n.default.left}}}]),t}();exports.default=l;
},{"../index":"KqmS","./room":"WRMb","./direction":"k0V4","./room-prefab-config":"MyIl","./coordinate":"oNOt","./room-size":"kdF2"}],"pP3Y":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./index"),a=function(){function t(e,a){i(this,t),this.x=e,this.y=a,this.id=1,this.height=5,this.width=5,this.direction="right",this.moveSpeed=5,s.camera.originX=e-s.canvas.width/2,s.camera.originY=a-s.canvas.height/2,s.emitter.on("updatePhysics",this.update.bind(this)),s.emitter.on("renderObjects",this.draw.bind(this))}return e(t,[{key:"draw",value:function(){s.canvas.canvasCTX.fillStyle="#000000",s.canvas.canvasCTX.fillRect(s.canvas.width/2-this.width/2,s.canvas.height/2-this.height/2,this.width,this.height)}},{key:"update",value:function(){var i=0;s.keystates.RightArrowIsActive&&(this.direction="right",i=this.moveSpeed,this.moveHorizontal(i)),s.keystates.LeftArrowIsActive&&(this.direction="left",i=-1*this.moveSpeed,this.moveHorizontal(i)),s.keystates.UpArrowIsActive&&(this.direction="up",i=-1*this.moveSpeed,this.moveVertical(i)),s.keystates.DownArrowIsActive&&(this.direction="down",i=this.moveSpeed,this.moveVertical(i)),s.debug.playerXPosition=this.x,s.debug.playerYPosition=this.y}},{key:"moveVertical",value:function(i){if(i>0)for(var t=1;t<=i;t++){if(this.y++,!this.validatePosition()){this.y--;break}s.camera.originY++}else for(var e=-1;e>=i;e--){if(this.y--,!this.validatePosition()){this.y++;break}s.camera.originY--}}},{key:"moveHorizontal",value:function(i){if(i>0)for(var t=1;t<=i;t++){if(this.x++,!this.validatePosition()){this.x--;break}s.camera.originX++}else for(var e=-1;e>=i;e--){if(this.x--,!this.validatePosition()){this.x++;break}s.camera.originX--}}},{key:"validatePosition",value:function(){Math.floor(this.x/s.settings.tileSize),Math.floor((this.x+this.width)/s.settings.tileSize),Math.floor(this.y/s.settings.tileSize),Math.floor((this.y+this.height-1)/s.settings.tileSize);return!0}}]),t}();exports.default=a;
},{"./index":"KqmS"}],"jR0p":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=r(require("./map-generation/coordinate")),o=function(){function t(){e(this,t),this.tileSize=15,this.drawTextures=!1,this.playerStart=new i.default(10,10),this.levelRoomCount=0}return n(t,[{key:"zoom",value:function(e){e.preventDefault(),e.deltaY>0?this.tileSize+=-2:this.tileSize+=2}}]),t}();exports.default=o;
},{"./map-generation/coordinate":"oNOt"}],"qewP":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../index"),r=function r(){var n=this;e(this,r),this.originX=0,this.originY=0,i.emitter.on("renderObjects",function(){i.debug.cameraX=n.originX,i.debug.cameraY=n.originY})};exports.default=r;
},{"../index":"KqmS"}],"KqmS":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./engine/canvas")),n=e(require("./engine/debug")),r=require("eventemitter3"),s=e(require("./engine/keystates")),a=e(require("./map-generation/level")),i=e(require("./player")),o=e(require("./settings")),u=e(require("./engine/camera"));function d(){document.addEventListener("keydown",function(e){exports.keystates.setKey(e.keyCode,!0)}),document.addEventListener("keyup",function(e){exports.keystates.setKey(e.keyCode,!1)}),document.getElementById("main-canvas").addEventListener("wheel",function(e){exports.settings.zoom(e)}),document.getElementById("generate-button").addEventListener("click",function(e){exports.level.generateMap()}),exports.emitter.emit("updatePhysics"),exports.emitter.emit("renderObjects");setInterval(function(){exports.emitter.emit("updatePhysics")},32),setInterval(function(){exports.canvas.canvasCTX.clearRect(0,0,exports.canvas.width,exports.canvas.height),exports.emitter.emit("renderObjects")},32)}exports.settings=new o.default,exports.emitter=new r.EventEmitter,exports.canvas=new t.default,exports.camera=new u.default,exports.keystates=new s.default,exports.level=new a.default(exports.settings.levelRoomCount),exports.player=new i.default(exports.settings.playerStart.x,exports.settings.playerStart.y),exports.debug=new n.default,window.onload=function(){d()};
},{"./engine/canvas":"N3Pg","./engine/debug":"ODNz","eventemitter3":"LqgX","./engine/keystates":"diul","./map-generation/level":"Q5Gq","./player":"pP3Y","./settings":"jR0p","./engine/camera":"qewP"}]},{},["KqmS"], null)
//# sourceMappingURL=scripts.c995e420.js.map